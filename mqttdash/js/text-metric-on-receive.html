<!doctype html>
<html>
 <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"><!--Prevent IE using compatibility mode on local or intranet pages. Do not put scripts before this line.-->
  <meta name="viewport" content="width=device-width, user-scalable=yes"><!--Mobile device scaling-->
  <meta charset="UTF-8">
  <title>MQTT Dash</title>

  <!--load stylesheets first (rationale: https://developers.google.com/speed/docs/best-practices/rtt#PutStylesBeforeScripts)-->
  <link rel="stylesheet" href="require/webknife/framework.min.css" type="text/css">
  <link rel="stylesheet" href="require/webknife/highlight.min.css" type="text/css">
  <link rel="stylesheet" href="require/docgen.css" type="text/css">
  <link rel="stylesheet" href="require/print.css" media="print">

  <!--load scripts second-->

  <script src="require/webknife/framework.min.js"></script>
  <script src="require/webknife/framework.icons.js"></script>
  <script src="require/webknife/highlight.min.js"></script>

  <!--inline scripts last-->

<script type="text/javascript">

$(document).ready( function () {
  $("#dg-toc").hide(); //hide the table of contents

  //instantiate an svg injector to show SVG icons
  var injector = new svgInject();
  injector.inject();

  //code syntax highlighting
  $('pre code, .w-inline-code').each(function(i, block) {
    hljs.highlightBlock(block);
  });

  //toggle visibility of table of contents
  $("#dg-navigator").click(function()
  {
    $("#dg-toc").slideToggle("fast");
    $(this).toggleClass("active");
  });

});
</script>

<script type="text/x-mathjax-config">
//MathJax configuration is the same as used by math.stackexchange.com
MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
  tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
  TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
  messageStyle: "none"
});
</script>

</head>

<body>

<div id="dg-toc"><div><table class="unstyled"><tr><td class="dg-tocGroup"><ul><li class="dg-tocHeading">Overview</li><li><a href="index.html">Table of contents</a></li></ul></td><td class="dg-tocGroup"><ul><li class="dg-tocHeading">Text metric</li><li><a href="text-metric-on-receive.html">On Receive</a></li><li><a href="text-metric-on-display.html">On Display</a></li><li><a href="text-metric-on-tap.html">On Tap</a></li></ul></td><td class="dg-tocGroup"></td><td class="dg-tocGroup"></td><td class="dg-tocGroup" id="dg-tocFixedColumn"><ul><li><span class="w-icon dg-tocIcon" data-name="person_group" title="archive"></span><a href="ownership.html">Ownership</a></li><li><span class="w-icon dg-tocIcon" data-name="refresh" title="archive"></span><a href="release-notes.html">Release Notes</a></li></ul><div></div></td></tr></table></div></div>
<div id="dg-navigator">Table of contents</div>

<header>
 <div class="w-fixed-width">
  <a id="dg-homelink" href="index.html">
    <div id="dg-logo" style="background-image: url(files/images/logo.png); height: 51px; line-height: 51px; padding-left: 76px;">
      <span id="dg-title">MQTT Dash</span> <span id="dg-web-title-version" style="font-weight:normal;">(IoT, Smart Home)</span>
    </div>
  </a>
  <div>
    <span id="dg-backlink"></span>
  </div>
 </div>
</header>

<section id="dg-content"><div class="w-fixed-width"><div id="dg-innerContent"><h1 id="dg-autoTitle">On Receive</h1><p>MQTT Dash scripting manual (JavaScript)</p>
<p>Text metric &#x21D2; On Receive handler called when payload received for the metric. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (parseInt(event.payload) &gt; 90) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, &apos;HOT&apos;, false, 0);
</code></pre>
<p>}</p>
<p>Text metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.text - (String) Main text to display.</p>
<p>event.textColor - (HEX String) Main text color. E.g. &quot;#ffffcc&quot;.</p>
<p>Example:</p>
<p>if (parseInt(event.getLastPayload()) &gt; 90) {</p>
<pre><code>event.text = &apos;HOT&apos;;

event.textColor = &apos;#ffcccc&apos;;
</code></pre>
<p>} else {</p>
<pre><code>event.textColor = &apos;#ffffff&apos;;
</code></pre>
<p>}</p>
<p>Text metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
<p>Switch metric &#x21D2; On Receive handler called when payload received for the metric. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (event.payload == &apos;1&apos;) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, &apos;ON&apos;, false, 0);
</code></pre>
<p>} else {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, &apos;OFF&apos;, false, 0);
</code></pre>
<p>}</p>
<p>Switch metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.on - (Boolean) You can set this property in order to change the switch status to ON or OFF.</p>
<p>event.iconColor - (HEX String) Icon color. E.g. &quot;#ffffcc&quot;.</p>
<p>Example:</p>
<p>if (parseInt(event.getLastPayload()) == 1) {</p>
<pre><code>event.iconColor = &apos;#ffcccc&apos;;
</code></pre>
<p>} else {</p>
<pre><code>event.iconColor = &apos;#ffffff&apos;;
</code></pre>
<p>}</p>
<p><a href="#test"></a>
Switch metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
<p>Range/progress metric &#x21D2; On Receive handler called when payload received for the metric. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (parseInt(event.payload) &gt; 90) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, &apos;TOO HOT&apos;, false, 0);
</code></pre>
<p>} else {</p>
<pre><code>app.publish(&apos;messages/status&apos;, &apos;NORMAL&apos;, false, 0);
</code></pre>
<p>}</p>
<p>Range/progress metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.progressColor - (HEX String) Main text color. E.g. &quot;#ffffcc&quot;.</p>
<p>Example:</p>
<p>if (parseInt(event.getLastPayload()) &gt; 90) {</p>
<pre><code>event.progressColor = &apos;#ffcccc&apos;;
</code></pre>
<p>} else {</p>
<pre><code>event.progressColor = &apos;#ffffff&apos;;
</code></pre>
<p>}</p>
<p>Range/progress metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/status&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
<p>Multi choice metric &#x21D2; On Receive handler called when payload received for the metric. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (parseInt(event.payload) &gt; 90) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, &apos;HOT&apos;, false, 0);
</code></pre>
<p>}</p>
<p>Multi choice metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.text - (String) Main text to display.</p>
<p>event.textColor - (HEX String) Main text color. E.g. &quot;#ffffcc&quot;.</p>
<p>Example:</p>
<p>if (parseInt(event.getLastPayload()) &gt; 90) {</p>
<pre><code>event.textColor = &apos;#ffcccc&apos;;
</code></pre>
<p>} else {</p>
<pre><code>event.textColor = &apos;#ffffff&apos;;
</code></pre>
<p>}</p>
<p>Multi choice metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
<p>Image metric &#x21D2; On Receive handler called when payload received for the metric (called only if you&apos;ve selected &quot;Image URL in payload&quot; setting). You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (parseInt(event.payload) == &apos;rain&apos;) {</p>
<pre><code>event.payload = &apos;http://example.com/rainy.png&apos;;
</code></pre>
<p>} else if (parseInt(event.payload) == &apos;sun&apos;) {</p>
<pre><code>event.payload = &apos;http://example.com/sunny.png&apos;;
</code></pre>
<p>}</p>
<p>Image metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.url - (String) Image URL to download and display.</p>
<p>Example:</p>
<p>if (event.getLastPayload() == &apos;&apos;) {</p>
<pre><code>event.url = &apos;http://example.com/rainy.png&apos;;
</code></pre>
<p>} else {</p>
<pre><code>event.url = &apos;http://example.com/sunny.png&apos;;
</code></pre>
<p>}</p>
<p>Image metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
<p>Color metric &#x21D2; On Receive handler called when payload received for the metric. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.payload - (String) Received raw payload string. You can modify/transform it before it&apos;ll be processed and displayed.</p>
<p>event.topic - (String) Topic, to which payload was received.</p>
<p>Example:</p>
<p>if (event.payload == &apos;red&apos;) {</p>
<pre><code>event.payload = &apos;#FF0000&apos;;
</code></pre>
<p>} else if (event.payload == &apos;green&apos;) {</p>
<pre><code>event.payload = &apos;#2AFF00&apos;;
</code></pre>
<p>} else if (event.payload == &apos;blue&apos;) {</p>
<pre><code>event.payload = &apos;#002BFF&apos;;
</code></pre>
<p>}</p>
<p>Color metric &#x21D2; On Display handler called when tile needs to be updated/re-rendered, e.g. contents or last activity time changed. Usually it happens once per second for all visible tiles. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.getSecondsSinceLastActivity() - (Integer) Returns number of seconds, elapsed since last payload was received.</p>
<p>event.lastActivityString - (String) Text to display at the bottom of tile.</p>
<p>event.blink - (Boolean) Tile will blink if value of the property is true.</p>
<p>event.name - (String) Text to be shown at the top of tile.</p>
<p>event.getLastPayload() - (String) Returns last received raw payload.</p>
<p>event.color - (HEX String) Icon color. E.g. &quot;#ffffcc&quot;.</p>
<p>Example:</p>
<p>if (event.getLastPayload() == &apos;red&apos;) {</p>
<pre><code>event.color = &apos;#FF0000&apos;;
</code></pre>
<p>} else if (event.getLastPayload() == &apos;green&apos;) {</p>
<pre><code>event.color = &apos;#2AFF00&apos;;
</code></pre>
<p>} else if (event.getLastPayload() == &apos;blue&apos;) {</p>
<pre><code>event.color = &apos;#002BFF&apos;;
</code></pre>
<p>}</p>
<p>Color metric &#x21D2; On Click handler called when user taps/clicks on the tile. You can use:</p>
<p>app.publish(topic, payload, retained, qos); - Publish to payload (String) to topic (String) with specified retained flag (Boolean) and qos (Integer).</p>
<p>app.openUri(uri); - Open specified uri (String) in an external app. uri examples: http://www.example.com/page.html, tel:123, content://contacts/people/</p>
<p>event.data - (Any type) Custom runtime data. You can get/set any data, which you need to be preserved between calls. The data shared between On Receive, On Display, On Tap. So you can set data in On Receive and use this data later in On Display. The data not preserved between app launches.</p>
<p>event.preventDefault - (Boolean) False by default. If True, default tap event behavoiur will be disabled.</p>
<p>Example:</p>
<p>event.preventDefault = true;</p>
<p>if (event.data) {</p>
<pre><code>app.publish(&apos;messages/alert&apos;, event.data, false, 0);
</code></pre>
<p>}</p>
</div></div></section>

 <footer>
  <div><p class="w-fixed-width"><span id="dg-web-footer">Version IoT, Smart Home released on 1 Aug 2016.</span></p></div>
  <div class="w-fixed-width">
    <p><span id="dg-copyright">&#xA9; 2017 <a href="http://www.routix.net">Routix software</a></span></p>
    <p>
      <span id="dg-marking"></span>
      <span id="dg-legalese"></span>
      <span id="dg-attribution">Created by DocGen 2.1.3 on 05/02/2017 at 18:07:25.</span>
    </p>
  </div>
 </footer>
 
 </body>
</html>
